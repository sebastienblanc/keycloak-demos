"use strict";var module=angular.module("customer",[]),auth={},logout=function(){auth.loggedIn=!1,auth.authz=null,window.location=auth.logoutUrl};angular.element(document).ready(function(a){var b=new Keycloak("keycloak.json");auth.loggedIn=!1,b.init({onLoad:"login-required"}).success(function(){auth.loggedIn=!0,auth.authz=b,auth.logoutUrl=b.authServerUrl+"/realms/sebidemo/protocol/openid-connect/logout?redirect_uri=http://localhost:9000/index.html",module.factory("Auth",function(){return auth}),angular.bootstrap(document,["customer"])})}),module.controller("GlobalCtrl",["$scope","$http",function(a,b){a.customers=[],a.reloadData=function(){b.get("http://localhost:8082/rest/customers").success(function(b){a.customers=angular.fromJson(b)})},a.logout=logout}]),module.factory("authInterceptor",["$q","Auth",function(a,b){return{request:function(c){var d=a.defer();return b.authz.token&&b.authz.updateToken(5).success(function(){c.headers=c.headers||{},c.headers.Authorization="Bearer "+b.authz.token,d.resolve(c)}).error(function(){d.reject("Failed to refresh token")}),d.promise}}}]),module.config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}]);